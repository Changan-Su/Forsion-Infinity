# å°çº¢ä¹¦é£æ ¼è§†å›¾åŠŸèƒ½

**åŠŸèƒ½çŠ¶æ€ï¼š** âœ… å·²å®Œæˆ  
**å®ç°æ—¥æœŸï¼š** 2026-02-03  
**é€‚ç”¨ç‰ˆæœ¬ï¼š** Misskey Develop

---

## ä¸€ã€åŠŸèƒ½æ¦‚è¿°

ä¸º Misskey çš„ Exploreï¼ˆæ¢ç´¢ï¼‰é¡µé¢å¢åŠ äº†ä¸¤ç§å°çº¢ä¹¦é£æ ¼çš„è§†å›¾æ¨¡å¼ï¼Œæä¾›æ›´åŠ è§†è§‰åŒ–çš„å†…å®¹æµè§ˆä½“éªŒã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¼ ç»Ÿåˆ—è¡¨è§†å›¾ã€ç€‘å¸ƒæµè§†å›¾å’Œç´§å‡‘å¡ç‰‡è§†å›¾ä¹‹é—´è‡ªç”±åˆ‡æ¢ã€‚

### åŠŸèƒ½ç‰¹æ€§

- âœ… ä¸‰ç§è§†å›¾æ¨¡å¼ï¼šåˆ—è¡¨ / ç€‘å¸ƒæµ / ç´§å‡‘
- âœ… å°çº¢ä¹¦é£æ ¼å¡ç‰‡è®¾è®¡ï¼ˆå°é¢å›¾ + æ ‡é¢˜ + ä½œè€…ä¿¡æ¯ï¼‰
- âœ… å®Œæ•´çš„å“åº”å¼é€‚é…ï¼ˆæ¡Œé¢ç«¯ 5 åˆ— â†’ ç§»åŠ¨ç«¯ 2 åˆ—ï¼‰
- âœ… è§†å›¾åå¥½è‡ªåŠ¨ä¿å­˜ï¼ˆlocalStorageï¼‰
- âœ… æ”¯æŒè§†é¢‘ã€GIF æ ‡è¯†
- âœ… æ— å›¾ç‰‡æ—¶ä¼˜é›…é™çº§æ˜¾ç¤ºæ–‡å­—å†…å®¹

---

## äºŒã€ä½¿ç”¨æ–¹æ³•

### è®¿é—®å…¥å£

1. æ‰“å¼€ Misskey å®ä¾‹ï¼ˆä¾‹å¦‚ï¼šhttp://localhost:3000ï¼‰
2. å¯¼èˆªåˆ° **æ—¶é—´çº¿ (Timeline)** é¡µé¢ï¼ˆç‚¹å‡»å·¦ä¾§çš„"æ—¶é—´çº¿"æˆ–ä¸»é¡µå›¾æ ‡ï¼‰
3. åœ¨é¡µé¢å³ä¸Šè§’å·¥å…·æ ä¸­ï¼Œç‚¹å‡»**è§†å›¾æ¨¡å¼å›¾æ ‡**ï¼ˆåˆ—è¡¨/ç½‘æ ¼/åŒåˆ—å›¾æ ‡ï¼‰
4. ä»å¼¹å‡ºèœå•ä¸­é€‰æ‹©æƒ³è¦çš„è§†å›¾æ¨¡å¼

### è§†å›¾æ¨¡å¼è¯´æ˜

| æ¨¡å¼ | å›¾æ ‡ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **åˆ—è¡¨è§†å›¾** | ğŸ“‹ `ti-list` | ä¼ ç»Ÿçš„æ—¶é—´çº¿åˆ—è¡¨ | é˜…è¯»è¯¦ç»†å†…å®¹ |
| **ç€‘å¸ƒæµè§†å›¾** | ğŸ”² `ti-layout-grid` | å“åº”å¼å¤šåˆ—å¡ç‰‡ï¼ˆ2-5åˆ—ï¼‰ | æµè§ˆå¤§é‡å›¾ç‰‡å†…å®¹ |
| **ç´§å‡‘è§†å›¾** | â¬œ `ti-layout-columns` | å›ºå®šåŒåˆ—ï¼Œç§»åŠ¨ç«¯ä¼˜åŒ– | å°å±è®¾å¤‡å¿«é€Ÿæµè§ˆ |

### å“åº”å¼æ–­ç‚¹

- **ç§»åŠ¨ç«¯** (<600px): 2 åˆ—
- **å¹³æ¿** (600-900px): 3 åˆ—
- **æ¡Œé¢** (900-1200px): 4 åˆ—
- **å®½å±** (>1200px): 5 åˆ—

---

## ä¸‰ã€æŠ€æœ¯å®ç°

### æ¶æ„è®¾è®¡

```
explore.featured.vue (å…¥å£é¡µé¢)
    â”œâ”€â”€ MkNotesTimeline.vue (åˆ—è¡¨è§†å›¾)
    â””â”€â”€ MkNotesCardTimeline.vue (å¡ç‰‡è§†å›¾)
            â”œâ”€â”€ MkMasonryLayout.vue (å¸ƒå±€å®¹å™¨)
            â””â”€â”€ MkNoteCard.vue (å•ä¸ªå¡ç‰‡)
```

### æ ¸å¿ƒç»„ä»¶

#### 1. MkNoteCard.vue - å¡ç‰‡ç»„ä»¶

**ä½ç½®ï¼š** `packages/frontend/src/components/MkNoteCard.vue`

**åŠŸèƒ½ï¼š**
- å°é¢å›¾ç‰‡å±•ç¤ºï¼ˆä» `note.files` å–ç¬¬ä¸€å¼ å›¾ç‰‡ï¼‰
- æ ‡é¢˜å†…å®¹æˆªæ–­ï¼ˆæœ€å¤š 60 å­—ç¬¦ï¼Œ2 è¡Œï¼‰
- åº•éƒ¨ä¿¡æ¯æ ï¼ˆç”¨æˆ·å¤´åƒã€åç§°ã€ç‚¹èµæ•°ï¼‰
- è§†é¢‘/GIF æ ‡è¯†è§’æ ‡
- æ— å›¾ç‰‡æ—¶æ˜¾ç¤ºæ–‡å­—èƒŒæ™¯å¡ç‰‡

**å…³é”®ä»£ç ç‰‡æ®µï¼š**

```vue
<template>
<div :class="$style.noteCard" @click="openNote">
  <!-- å°é¢åŒºåŸŸ -->
  <div v-if="coverImage" :class="$style.cover">
    <MkImgWithBlurhash :src="coverImage.thumbnailUrl" :hash="coverImage.blurhash" />
  </div>
  
  <!-- æ ‡é¢˜ -->
  <div :class="$style.title">{{ contentText }}</div>
  
  <!-- åº•éƒ¨ä¿¡æ¯ -->
  <div :class="$style.footer">
    <MkAvatar :user="appearNote.user" :size="24"/>
    <span>{{ appearNote.user.name }}</span>
    <span><i class="ti ti-heart"></i> {{ reactionCount }}</span>
  </div>
</div>
</template>
```

**æ ·å¼ç‰¹ç‚¹ï¼š**
- 3:4 å®½é«˜æ¯”å°é¢ï¼ˆä¸å°çº¢ä¹¦ä¸€è‡´ï¼‰
- 12px åœ†è§’
- Hover åŠ¨ç”»ï¼ˆä¸Šæµ® + é˜´å½±ï¼‰
- ä½¿ç”¨ CSS Variables é€‚é…ä¸»é¢˜

#### 2. MkMasonryLayout.vue - å¸ƒå±€å®¹å™¨

**ä½ç½®ï¼š** `packages/frontend/src/components/MkMasonryLayout.vue`

**åŠŸèƒ½ï¼š**
- ä½¿ç”¨ CSS Grid å®ç°å“åº”å¼å¸ƒå±€
- ä½¿ç”¨ Container Queries å®ç°æ–­ç‚¹åˆ‡æ¢
- æ”¯æŒç€‘å¸ƒæµå’Œç´§å‡‘ä¸¤ç§æ¨¡å¼

**å…³é”®æ ·å¼ï¼š**

```scss
.mode_masonry {
  display: grid;
  gap: 12px;
  
  grid-template-columns: repeat(2, 1fr);  // é»˜è®¤ 2 åˆ—
  
  @container (min-width: 600px) {
    grid-template-columns: repeat(3, 1fr);  // 3 åˆ—
  }
  
  @container (min-width: 900px) {
    grid-template-columns: repeat(4, 1fr);  // 4 åˆ—
  }
  
  @container (min-width: 1200px) {
    grid-template-columns: repeat(5, 1fr);  // 5 åˆ—
  }
}
```

#### 3. MkNotesCardTimeline.vue - å¡ç‰‡æ—¶é—´çº¿

**ä½ç½®ï¼š** `packages/frontend/src/components/MkNotesCardTimeline.vue`

**åŠŸèƒ½ï¼š**
- å°è£… `MkPagination` å’Œ `MkMasonryLayout`
- æ¥æ”¶ `paginator` è·å–æ•°æ®
- æ¸²æŸ“ `MkNoteCard` åˆ—è¡¨
- æ”¯æŒæ— é™æ»šåŠ¨åŠ è½½

### timeline.vue - å…¥å£é¡µé¢ä¿®æ”¹

**ä½ç½®ï¼š** `packages/frontend/src/pages/timeline.vue`

**æ–°å¢åŠŸèƒ½ï¼š**
- åœ¨ headerActions ä¸­æ·»åŠ è§†å›¾åˆ‡æ¢æŒ‰é’®
- è§†å›¾æ¨¡å¼çŠ¶æ€ç®¡ç†
- localStorage åå¥½ä¿å­˜ï¼ˆkey: `timeline_view_mode`ï¼‰
- ä¸ºå¡ç‰‡è§†å›¾åŠ¨æ€åˆ›å»º Paginator

**å…³é”®ä»£ç ï¼š**

```typescript
// è§†å›¾æ¨¡å¼çŠ¶æ€
const viewMode = ref<'list' | 'masonry' | 'compact'>(getInitialViewMode());

// åŠ¨æ€åˆ›å»º Paginator
const timelinePaginator = computed(() => {
  const timelineSrc = src.value.split(':')[0];
  const params = {
    withRenotes: withRenotes.value,
    withReplies: withReplies.value,
    withFiles: onlyFiles.value,
  };
  
  return markRaw(new Paginator(`notes/${timelineSrc}-timeline`, {
    limit: 10,
    params,
  }));
});

// åœ¨ headerActions ä¸­æ·»åŠ è§†å›¾åˆ‡æ¢
{
  icon: viewMode.value === 'list' ? 'ti ti-list' : ...,
  handler: (ev) => {
    os.popupMenu([
      { text: 'åˆ—è¡¨', action: () => { viewMode.value = 'list'; } },
      { text: 'ç€‘å¸ƒæµ', action: () => { viewMode.value = 'masonry'; } },
      { text: 'ç´§å‡‘', action: () => { viewMode.value = 'compact'; } },
    ], ev.target);
  },
}
```

**æ¨¡æ¿æ¸²æŸ“ï¼š**

```vue
<template v-if="viewMode === 'list'">
  <MkStreamingNotesTimeline ... />
</template>
<template v-else>
  <MkNotesCardTimeline :paginator="timelinePaginator" :mode="viewMode" />
</template>
```

---

## å››ã€ç›¸å…³æ–‡ä»¶

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶ | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| MkNoteCard.vue | `packages/frontend/src/components/` | å°çº¢ä¹¦é£æ ¼å¡ç‰‡ç»„ä»¶ |
| MkMasonryLayout.vue | `packages/frontend/src/components/` | ç€‘å¸ƒæµå¸ƒå±€å®¹å™¨ |
| MkNotesCardTimeline.vue | `packages/frontend/src/components/` | å¡ç‰‡æ—¶é—´çº¿ç»„ä»¶ |

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶ | è·¯å¾„ | ä¿®æ”¹å†…å®¹ |
|------|------|----------|
| timeline.vue | `packages/frontend/src/pages/` | æ·»åŠ è§†å›¾åˆ‡æ¢åŠŸèƒ½ã€è§†å›¾æ¨¡å¼çŠ¶æ€ç®¡ç†ã€ä¸ºå¡ç‰‡è§†å›¾åˆ›å»º Paginator |

---

## äº”ã€è®¾è®¡å‚è€ƒ

### å°çº¢ä¹¦è®¾è®¡å…ƒç´ æå–

æœ¬åŠŸèƒ½å‚è€ƒäº†å°çº¢ä¹¦çš„ä»¥ä¸‹è®¾è®¡ç‰¹ç‚¹ï¼š

1. **ç€‘å¸ƒæµå¸ƒå±€**
   - æ¡Œé¢ç«¯ 4-5 åˆ—ä¸ç­‰é«˜å¡ç‰‡
   - ç§»åŠ¨ç«¯è‡ªé€‚åº”ä¸º 2 åˆ—
   - å¡ç‰‡é—´è· 12px

2. **å¡ç‰‡ç»“æ„**
   - å°é¢å›¾ç‰‡å ä¸»å¯¼ï¼ˆ3:4 æ¯”ä¾‹ï¼‰
   - æ ‡é¢˜æ–‡å­— 1-2 è¡Œæˆªæ–­
   - åº•éƒ¨ä¿¡æ¯æ ï¼šå¤´åƒ + æ˜µç§° + ç‚¹èµæ•°
   - åœ†è§’ 12px

3. **äº¤äº’è®¾è®¡**
   - Hover æ‚¬æµ®æ•ˆæœ
   - ç‚¹å‡»è·³è½¬è¯¦æƒ…é¡µ
   - è§†é¢‘/GIF è§’æ ‡æ ‡è¯†

---

## å…­ã€æµ‹è¯•æŒ‡å—

### æ¡Œé¢ç«¯æµ‹è¯•

1. è®¿é—® Explore â†’ Featured é¡µé¢
2. ç‚¹å‡»ç€‘å¸ƒæµè§†å›¾æŒ‰é’®
3. è°ƒæ•´æµè§ˆå™¨çª—å£å®½åº¦ï¼Œè§‚å¯Ÿåˆ—æ•°å˜åŒ–ï¼š
   - >1200px: 5 åˆ—
   - 900-1200px: 4 åˆ—
   - 600-900px: 3 åˆ—
   - <600px: 2 åˆ—

### ç§»åŠ¨ç«¯æµ‹è¯•

1. ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·åˆ‡æ¢ç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿ
2. æ¨èæµ‹è¯•è®¾å¤‡ï¼š
   - iPhone 12 Pro (390px)
   - iPad (768px)
   - å°å±æ‰‹æœº (320px)
3. æµ‹è¯•ç´§å‡‘è§†å›¾ï¼ˆå›ºå®š 2 åˆ—ï¼‰

### åŠŸèƒ½æµ‹è¯•æ¸…å•

- [ ] è§†å›¾åˆ‡æ¢æŒ‰é’®æ­£å¸¸å·¥ä½œ
- [ ] å¡ç‰‡æ­£ç¡®æ˜¾ç¤ºå°é¢å›¾ç‰‡
- [ ] æ— å›¾ç‰‡å¸–å­æ˜¾ç¤ºæ–‡å­—èƒŒæ™¯
- [ ] ç”¨æˆ·å¤´åƒå’Œåç§°æ­£ç¡®æ˜¾ç¤º
- [ ] ç‚¹èµæ•°æ­£ç¡®è®¡ç®—å’Œæ˜¾ç¤º
- [ ] ç‚¹å‡»å¡ç‰‡è·³è½¬åˆ°è¯¦æƒ…é¡µ
- [ ] è§†é¢‘/GIF æ ‡è¯†æ­£ç¡®æ˜¾ç¤º
- [ ] æ— é™æ»šåŠ¨åŠ è½½æ­£å¸¸
- [ ] è§†å›¾åå¥½ä¿å­˜å’Œæ¢å¤
- [ ] å“åº”å¼å¸ƒå±€åœ¨å„æ–­ç‚¹æ­£å¸¸å·¥ä½œ

---

## ä¸ƒã€å·²çŸ¥é™åˆ¶

1. **ç€‘å¸ƒæµä¸ç­‰é«˜**ï¼šå½“å‰ä½¿ç”¨ CSS Grid ç­‰é«˜å¸ƒå±€ï¼Œæœªå®ç°çœŸæ­£çš„ç€‘å¸ƒæµæ•ˆæœï¼ˆéœ€è¦ JavaScript åŠ¨æ€è®¡ç®—ï¼‰
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¤§é‡å¡ç‰‡æ—¶å¯è€ƒè™‘è™šæ‹Ÿæ»šåŠ¨
3. **å›¾ç‰‡æ‡’åŠ è½½**ï¼šå·²ä½¿ç”¨ MkImgWithBlurhash ç»„ä»¶ï¼Œæ”¯æŒæ¨¡ç³Šå“ˆå¸Œå ä½

---

## å…«ã€æœªæ¥ä¼˜åŒ–æ–¹å‘

- [ ] å®ç°çœŸæ­£çš„ç€‘å¸ƒæµï¼ˆåŠ¨æ€åˆ—é«˜è®¡ç®—ï¼‰
- [ ] æ·»åŠ å¡ç‰‡å°ºå¯¸é…ç½®é€‰é¡¹
- [ ] æ”¯æŒæ‹–æ‹½æ’åº
- [ ] æ·»åŠ æ›´å¤šè§†å›¾æ¨¡å¼ï¼ˆåˆ—è¡¨å¤§å¡ç‰‡ã€ç”»å»Šç­‰ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼šè™šæ‹Ÿæ»šåŠ¨
- [ ] æ·»åŠ è¿‡æ»¤å’Œæ’åºåŠŸèƒ½

---

## ä¹ã€æ›´æ–°å†å²

| æ—¥æœŸ | ç‰ˆæœ¬ | å†…å®¹ |
|------|------|------|
| 2026-02-03 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°ä¸‰ç§è§†å›¾æ¨¡å¼ |

---

**ç›¸å…³æ–‡æ¡£ï¼š**
- [Function-Index.md](./Function-Index.md) - åŠŸèƒ½ç´¢å¼•
- [å°çº¢ä¹¦è®¾è®¡å‚è€ƒå›¾](../../Design/xhs.pen)

**å¼€å‘è€…ï¼š** AI Assistant  
**å®¡æ ¸è€…ï¼š** å¾…å®¡æ ¸
